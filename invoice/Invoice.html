<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="Invoice.css">
</head>

<body class="center">
    <!-- header Component -->
    <div class="header">
        <!-- Title and logo -->
        <div class="row">
            <div class="col">
                <button type="button" class="btn btn-danger">DUE</button><span
                    style="font-size: 40px; margin-left: 20px;"> Invoice</span><br><br><br>
                <span style="border: 1px solid; padding: 10px; margin-top: 100px;"> Thank you for your purchase. Timely
                    payment will be appreciated.</span>
            </div>

            <div class="col" style="text-align: right;">
                <img src="chrome.png" alt="Girl in a jacket" width="140px" height="140px"
                    style="border: 2px solid; padding: 30px; margin-right: 70px; padding-left: 30px;padding-right: 30px;">
            </div>
            <!-- <img src="chrome.png" alt="Girl in a jacket" width="200" height="300"> -->
        </div>
        <!-- Three Input box -->
        <div>
            <br><br>
            <div style="text-align: right;">

                <span style="float: left;"> Invoice No.<input type="text" name="invoice" id="invoice"
                        value="INV-694" /></span>
                <!-- <div style="text-align: right;"> -->
                <span style="float:right">
                    Language.
                    <select name="lan" id="lan" style="background-color: rgb(211,211,211);">
                        <option value="rupee">English(US)</option>

                    </select>
                    Currency
                    <select name="cur" id="cur" style="background-color: rgb(211,211,211);" onchange="changeCurrency()">
                        <option value="INR">Indian Rupee - INR</option>
                        <option value="USD">American Dollar - USD</option>
                        <option value="GBP" selected>British Pound - GBP</option>
                        <option value="JPY">Japanese Yen - JPY</option>
                    </select>
                </span>
            </div>
        </div>
    </div>
    <br><br>
    <hr>

    <!-- Address and form component -->
    <div class="row">
        <div class="col-6">
            <b>From</b><br>
            Your Business, Inc.<br>
            Your Address<br>
            City & ZIP, Your Country<br><br>

            <b>To</b><br>
            <textarea id="address" name="address" rows="5" cols="50" style="background-color:rgb(211,211,211)">Example, Inc. 
80 Mortimer Street
London W1W 7FE
United Kingdom
                    </textarea>
        </div>
        <div class="col-2">

        </div>
        <div class="col-4" style="text-align: justify-self; direction: ltr;">
            <b>Date</b><br>
            <input type="date" id="date" name="date" style="width: 270px;font-size: 17px;height: 30px;"><br><br>
            <b>Invoice Due</b><br>
            <select name="invoice_due" id="invoice_due"
                style="width: 270px;font-size: 17px; height: 30px;background-color: rgb(211,211,211);">
                <option value="5">After 5 Days</option>
                <option value="15">After 15 Days</option>
                <option value="20">After 20 Days</option>
                <option value="30">After 30 Days</option>
            </select>
            <br><br>
            <b>Purchase Order Number</b><br>
            <input type="text" name="purchase" id="purchase" value="PO-123" style="height: 30px;width: 270px;" />
        </div>

    </div>
    <br>
    <hr>
    <br>

    <!-- Billing Component -->
    <div>
        <!-- Header of Bill -->
        <div class="row">
            <div class="col-5">
                <b>Name</b>
            </div>
            <div class="col-2">
                <b style="float:right"> Quantity</b>
            </div>
            <div class="col-2">
                <span style="float:right"><b>Rate </b></span>
            </div>
            <div class="col-3">
                <b style="float:right;padding-right: 30px;"> Amount</b>
            </div>
        </div>
        <hr>
        <!-- Values of Bill -->
        <div class="row" id="item_1">
            <div class="col-5">
                <textarea name="name" id="name_1" rows="3" cols="47"
                    style="resize: none;">Items you are selling...</textarea><br>
                <button id="but_1" onclick="CloneItem(this.id);"> <img src="clipboard.svg"></img></button>

            </div>
            <div class="col-2">
                <input type="text" name="quantity" id="quantity_1" size="20" value="0" style="text-align: right;"
                    onchange="CalculateAmount(this.id)" />
            </div>
            <div class="col-2">
                <input type="text" name="rate" id="rate_1" size="20" value="0" style="text-align: right;" onchange="CalculateAmount(this.id)" />
            </div>
            <div class="col-3">
                <div id="amount_1" style="text-align: right;margin-right:30px">0</div>

            </div>
        </div>

    </div>
    <hr>

    <!-- Total amount component -->
    <div class="row">
        <div class="col">
            <buttton onclick="CloneNewItem()" class="btn btn-info" style="color:white;">New Line</buttton>
        </div>
        <div class="col">
            <span style="float:left;">Sub Total</span>
            <div style="float: right;padding-right: 10px;" id="sub_total">0</div><br>
            <hr>
            <button type="button" class="btn-close" aria-label="Close"></button>
            <span style="border: 1px solid ; padding: 4px;border-radius: 4px;"> Value Added Tax-%
                &nbsp;&nbsp;&nbsp;<input type="text" size="6" value="20" id="tax"
                    style="border:none; border-width: 0px; box-shadow:none;" onchange="CalculateTotal()"></span><span>
            </span>
            <span style="float: right;padding-right: 10px;" id="tax_value">0</span><br>
            <hr>
            <span style="float:left;font-weight: bold;">Total(<span id="curr1">GBP</span>)</span>
            <span style="float: right;font-weight: bold;padding-right: 10px;" id="total">0</span><br><br>

            <!-- Last line -->
            <div style="border: 0.2px solid red;padding: 3px; background-color: red; ">

                <div style="background-color:white;">
                    <span style="background-color: red;margin: 0px; padding: 5px;color:white">Total Due</span>
                    <span id="curr" style="padding-left: 10px;" style="background-color: white;">GBP</span>
                    <span style="float: right;padding-right: 10px;" id="total_due">0</span>
                </div>
            </div>

        </div>
    </div>

    <!-- JavaScript Code -->
    <script>
        let total_item = 1;

        // Calculate Amount
        function CalculateAmount(id) {
            if (id[0] == 'q') num = id.substring(9);
            else if (id[0] == 'r') num = id.substring(5);

            let quantity = document.getElementById("quantity_" + num);
            let rate = document.getElementById("rate_" + num);
            // console.log(quantity);
            document.getElementById("amount_" + num).innerHTML = quantity.value * rate.value;

            CalculateTotal();
        }

        // Calculate Total
        function CalculateTotal() {
            var sub_total = 0;
            for (i = 1; i <= total_item; i++) {

                let quantity = document.getElementById("quantity_" + i);
                let rate = document.getElementById("rate_" + i);
                sub_total += quantity.value * rate.value;

            }
            // document.getElementById('sub_total').innerHTML = sub_total;
            let tax = document.getElementById('tax');
            let tax_value = (tax.value / 100) * sub_total;
            let total = sub_total + tax_value;
            document.getElementById('sub_total').innerHTML = sub_total;
            document.getElementById('tax_value').innerHTML = tax_value;
            document.getElementById('total').innerHTML = total;
            document.getElementById('total_due').innerHTML = total;
        }
        function CloneItem(id) {
            total_item++;

            // Get the element
            var num = id.substring(4);

            item_id = 'item_' + num;
            // console.log("Calling Id " + item_id);
            var elem = document.querySelector('#' + item_id);

            // Create a copy of it
            var clone = elem.cloneNode(true);

            // Update the ID 
            clone.id = 'item_' + total_item;

            const elementsThatHaveId = [...clone.querySelectorAll('[id]')];
            if (clone.matches('[id]')) {
                elementsThatHaveId.push(clone);
            }
            elementsThatHaveId.forEach((e) => {
                if (e.id[0] == 'q')
                    e.id = 'quantity_' + total_item;
                else if (e.id[0] == 'a')
                    e.id = 'amount_' + total_item;
                else if (e.id[0] == 'r')
                    e.id = 'rate_' + total_item;
                else if (e.id[0] == 'b')
                    e.id = 'but_' + total_item;
                else if (e.id[0] == 'n')
                    e.id = 'name' + total_item;
            });
            elem.after(clone);
            CalculateTotal();

        }
        function CloneNewItem() {
            total_item++;
            // Get the element
            var elem = document.querySelector('#item_1');

            // Create a copy of it
            var clone = elem.cloneNode(true);

            // Update the ID and add a class
            clone.id = 'item_' + total_item;

            const elementsThatHaveId = [...clone.querySelectorAll('[id]')];
            if (clone.matches('[id]')) {
                elementsThatHaveId.push(clone);
            }
            elementsThatHaveId.forEach((e) => {
                if (e.id[0] == 'q') { e.id = 'quantity_' + total_item; e.value = 0; }
                else if (e.id[0] == 'a') { e.id = 'amount_' + total_item; e.value = 0; }
                else if (e.id[0] == 'r') { e.id = 'rate_' + total_item; e.value = 0; }
                else if (e.id[0] == 'b')
                    e.id = 'but_' + total_item;
                else if (e.id[0] == 'n') { e.id = 'name' + total_item; e.value = "Items you are selling..."; }
            });
            elem.after(clone);
            document.getElementById("amount_" + total_item).innerHTML = 0;

            document.getElementById("name_" + total_item).innerHTML = "Items you are selling...1";


        }
        function changeCurrency() {
            var x = document.getElementById("cur").value;
            document.getElementById("curr").innerHTML = x;
            document.getElementById("curr1").innerHTML = x;
        }
    </script>
</body>

</html>